
2019-03-31
--------------
What public dataset on GCP has data we can use for the virtual sensor project


GCP - National Water Model

Simulation modeling observed and forecasted streamflow in the US

The data is an unknown file format for me.

Here is some tools which might be able to read them.

davis@twenty:~/Downloads$ dpkg-query -L netcdf-bin
/.
/usr
/usr/bin
/usr/bin/nccopy
/usr/bin/ncdump
/usr/bin/ncgen
/usr/bin/ncgen3
/usr/share
/usr/share/doc
/usr/share/doc/netcdf-bin
/usr/share/doc/netcdf-bin/changelog.Debian.gz
/usr/share/doc/netcdf-bin/changelog.gz
/usr/share/doc/netcdf-bin/copyright
/usr/share/man
/usr/share/man/man1
/usr/share/man/man1/nccopy.1.gz
/usr/share/man/man1/ncdump.1.gz
/usr/share/man/man1/ncgen.1.gz
/usr/share/man/man1/ncgen3.1.gz

ncdump can read the .ncdf files.  It contains station ids and readings.  Trying to find the station id's associated with 
the Richmond, VA area I used this website

https://maps.waterdata.usgs.gov/mapper/index.html

These are the sensors they have


These are on same river.  Here is the upmost one.
Site Number: 02037000
Site Name: JAMES RIVER AND KANAWHA CANAL NEAR RICHMOND, VA
Site Type: Stream
Agency: USGS

Site Number: 02037500
Site Name: JAMES RIVER NEAR RICHMOND, VA
Site Type: Stream
Agency: USGS

Site Number: 02037618
Site Name: JAMES RIVER AT BOULEVARD BRIDGE AT RICHMOND, VA
Site Type: Stream
Agency: USGS

This is the last one on the river centered about Richmond.
Site Number: 02037705
Site Name: JAMES RIVER AT CITY LOCKS AT RICHMOND, VA
Site Type: Stream
Agency: USGS



Site Number: 02038000
Site Name: FALLING CREEK NEAR CHESTERFIELD, VA
Site Type: Stream
Agency: USGS


2019-04-01
--------------

Notes on fields
https://help.waterdata.usgs.gov/output-formats#nwis_mapper


These are in the area Jim has sensors.  This will be the area we use for the 
hackathon.
A screenshot of the area is shown in pics.  Titled area-of-interest-usgs.png

From North West corner to South East.

Site Number: 0204288721
Site Name: EB ELIZABETH RIVER AT RT 165 AT VIRGINIA BEACH, VA
Site Type: Stream
Agency: USGS
Latitude 36°49'38",   Longitude 76°09'56"   NAD27
Virginia Beach City, Virginia, Hydrologic Unit 02080208
Datum of gage: 0.00 feet above   NAVD88

Site Number: 0204291317
Site Name: THALIA CREEK AT ROUTE 58 AT THALIA, VA
Site Type: Stream
Agency: USGS
Latitude 36°50'35.9",   Longitude 76°07'28.1"   NAD83
Virginia Beach City, Virginia, Hydrologic Unit 02080108
Datum of gage: 0.00 feet above   NAVD88.


Site Number: 0204293125
Site Name: LONDON BRIDGE CREEK AT RT 58 AT VIRGINIA BEACH, VA
Site Type: Stream
Agency: USGS
Latitude 36°50'28.1",   Longitude 76°03'25.7"   NAD83
Virginia Beach City, Virginia, Hydrologic Unit 02080108
Datum of gage: 0.00 feet above   NAVD88.


Site Number: 0204295505
Site Name: LITTLE NECK CREEK AT PINEWOOD RD AT VA BEACH, VA
Site Type: Stream
Agency: USGS
Latitude 36°51'33.4",   Longitude 75°59'04.1"   NAD83
Virginia Beach City, Virginia, Hydrologic Unit 02080108
Datum of gage: 0.00 feet above   NAVD88.


Site Number: 02042928
Site Name: BYPASS CANAL AT INTL PARKWAY NEAR MAPLETON, VA
Site Type: Stream
Agency: USGS
Latitude 36°48'56.8",   Longitude 76°03'39.3"   NAD83
Virginia Beach City, Virginia, Hydrologic Unit 02080108
(Update: 2019-04-13 SN02042928.csv only has tidal_high values and only for 2018-5-29 to 2018-04-15)

Site Number: 0204297575
Site Name: LAKE RUDEE NEAR BELLS ROAD AT VIRGINIA BEACH, VA
Site Type: Stream
Agency: USGS
Latitude 36°49'29.2",   Longitude 75°59'06.9"   NAD83
Virginia Beach City, Virginia, Hydrologic Unit 02080108
Datum of gage: 0.00 feet above   NAVD88.

Site Number: 02043155
Site Name: WEST NECK CREEK AT DAM NECK ROAD AT MAPLETON, VA
Site Type: Stream
Agency: USGS
Latitude 36°47'18.1",   Longitude 76°04'14.8"   NAD83
Virginia Beach City, Virginia, Hydrologic Unit 03010205
Drainage area: 3.12 square miles
Datum of gage: 0.00 feet above   NAVD88.


Site Number: 0204288539
Site Name: BELLS MILL CRK AT BELLS MILL RD AT CHESAPEAKE, VA
Site Type: Stream
Agency: USGS
Latitude 36°42'42.1",   Longitude 76°16'05.6"   NAD83
Chesapeake City, Virginia, Hydrologic Unit 02080208
Datum of gage: 0.0 feet above   NAVD88.
(Update: 2019-04-13 SN0204288539.csv  does not have precipitation columns)


Site Number: 0204309906
Site Name: CONVEYANCE CHAN AT RAMSGATE LN NR GREAT BRIDGE, VA
Site Type: Stream
Agency: USGS
Latitude 36°41'26.32",   Longitude 76°12'44.34"   NAD83
Chesapeake City, Virginia, Hydrologic Unit 03010205
(Could not get daily data for this site.  It had the flow rate data though.)


Site Number: 0204300267
Site Name: BEGGARS BRIDGE CREEK NEAR DAWLEY CORNERS, VA
Site Type: Stream
Agency: USGS
Latitude 36°40'47.3",   Longitude 75°59'02.4"   NAD83
Virginia Beach City, Virginia, Hydrologic Unit 03010205
Datum of gage: 0.00 feet above   NAVD88.


2019-04-02
--------------

Looking at google maps, the coordinates are approximately 38.850474, -76.079535
Interesting because the coordinates above are positive for longitude

Google maps uses WGS84 system.

Experimentation shows that the longtitude should be a negative number.

The conversion of lat/lon to different coordinate system fails. 8-(

2019-04-03
--------------
John pointed out the method I pulled form wikipedia for converting
from one coordinate system to another is wrong.

Added the gmap capability in jupyter notebooks.

In order to get the API key to be read from environment, need to source 
setenv.sh from the terminal and then start jupyter notebooks.  Starting
up jupyter from within anaconda-navigator fails on osx.  The code
for starting up navigator uses --init-file on the bash that is started up
and thus even if you set the variable in your shell it does not follow.

API docs for the gmaps module are here
https://jupyter-gmaps.readthedocs.io/en/latest/api.html#module-gmaps.datasets


2019-04-06
--------------
Started working with the regression sample to add tensorboard to a cell
in notebooks.  Did not finish.


2019-04-13
--------------
Loading the greenstream initial set of csv's into bigquery.
Using cloud dataprep to examine the data.

In greenstreams data the "distance" column is number in cm's to water level.
After looking at the data and talking to Jim, we determined this
iteration of data should be tossed.

Experimented with reading the tsv files with tensorflow and converting.
It seemed to choke on .tsv files.

When back to bash and sed to write the tsv files to csv.

SN02042928.csv only has tidal_high values and only for 2018-5-29 to 2018-04-15
SN0204288539.csv  does not have precipitation columns - fix with sed -i "s/$/,,/g" SN0204288539.csv


Some bigquery imports failed on making the same schmea.  I had to specify them 
on some.  The schema is in 'misc' directory.  Use this site to validate 
the JSON https://www.jsonschemavalidator.net/  When specifying the schema, make sure
to use `Advanced options` to skip one header row.



